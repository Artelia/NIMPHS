# Rules to run jobs during merge requests or deployement / release stages
.run_automatically:
  rules:
    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'
      when: always
      allow_failure: true

    - if: $DEPLOY_DOCS == "true"
      when: on_success
      allow_failure: false

    - if: $CI_COMMIT_TAG
      when: on_success
      allow_failure: false

    - when: never


# Rules to run jobs during merge requests or release stages
.run_automatically_no_deploy:
  rules:
    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'
      when: always
      allow_failure: true

    - if: $CI_COMMIT_TAG
      when: on_success
      allow_failure: false
      
    - when: never

# Rules to run jobs for doc deployement only
.deploy_only:
  rules:
    - if: $DEPLOY_DOCS == "true"
      when: on_success
      allow_failure: false

    - when: never


# Rules to run jobs for new releases only (using pipeline for tags, created manually)
.tag_only:
  rules:
    - if: $CI_COMMIT_TAG
      when: on_success
      allow_failure: false

    - when: never